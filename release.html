<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="profile" href="https://gmpg.org/xfn/11">
    <title>发布</title>
    <link rel='stylesheet' id='caozhuti-style-css' href='static/css/style-4.9.css' type='text/css' media='all'>
    <link rel='stylesheet' id='external-css' href='static/css/external-4.9.css' type='text/css' media='all'>
    <link rel='stylesheet' id='sweetalert2-css' href='static/css/sweetalert2.min-4.9.css' type='text/css' media='all'>
    <link rel='stylesheet' id='app-css' href='static/css/app-4.9.css' type='text/css' media='all'>
    <link rel='stylesheet' id='diy-css' href='static/css/diy-4.9.css' type='text/css' media='all'>
    <script type='text/javascript' src='static/js/jquery-2.2.4.min-2.2.4.js'></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements. All other JS at the end of file. -->
    <!--[if lt IE 9]>
    <script src="static/js/html5shiv.js"></script>
    <script src="static/js/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="https://www.layuicdn.com/layui/css/layui.css" />
</head>

<body class="archive category category-work category-93  hfeed navbar-sticky_transparent navbar-slide sidebar-none pagination-infinite_button">
<div class="site">
    <!--头部-->
    <header class="site-header">
        <div class="container">
            <div class="navbar">
                <div class="logo-wrapper">
                    <a href="index.html">
                        <img class="logo regular tap-logo" src="static/picture/logo.png" data-dark="" alt="流木领域">
                    </a>
                </div>
                <div class="sep"></div>
                <nav class="main-menu hidden-xs hidden-sm hidden-md">
                    <ul id="menu-menu-1" class="nav-list u-plain-list">
                        <li id="menu-item-34"
                            class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-34">
                            <a href="index.html">微信俱乐部</a>
                        </li>
                        <li id="menu-item-101"
                            class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-101">
                            <a href="code.html">源码大全</a></li>

                    </ul>
                </nav>
                <div class="main-search">
                    <form method="get" class="search-form inline" action="https://ww.aliwen.vip/">
                        <input type="search" class="search-field inline-field" placeholder="输入关键词，回车..."
                               autocomplete="off" value="" name="s" required="required">
                        <button type="submit" class="search-submit"><i class="mdi mdi-magnify"></i></button>
                    </form>
                    <div class="search-close navbar-button"><i class="mdi mdi-close"></i></div>
                </div>
                <div class="actions">
                    <!--发布-->
                    <!-- user -->
                    <div class="login-btn navbar-button"><i class="mdi mdi-account"></i><span id="login_text">个人中心</span></div>
                    <div class="showbtn navbar-button"><span id="jifen-num">积分：0</span></div>
                    <!-- user end -->
                    <div class="tap-dark navbar-button"><i class="mdi mdi-brightness-4"></i></div>
                    <div class="burger"></div>
                </div>
            </div>
        </div>
    </header>
    <div class="header-gap"></div>
    <!--分类-->
    <div class="term-bar lazyload visible"
         data-bg="static/image/bar_bg.jpg">
        <h1 class="term-title" id="term-title"></h1></div>
    <!--内容部分-->
    <div class="site-content">
        <div class="container">
            <!--筛选-->
            <div class="filter--content">
               <h1>发布</h1>
            </div>
            <!--选项卡-->
            <div class="layui-tab layui-tab-card">
                <ul class="layui-tab-title">
                    <li class="layui-this">发布微信群</li>
                    <li>发布源码</li>
                </ul>
                <div class="layui-tab-content" style="margin-top: 20px">

                    <div class="layui-tab-item layui-show">
                        <p class="layui-elem-quote">禁止发布色情，赌博，红包的群二维码，所有发布的内容7天后自动删除，本站不保存任何信息。如果想进交流群，请添加微信liumulingyu或者直接扫描底部的二维码。
                            另外，本站不提供图片上传服务，第三方免费上传图片网站<a href="https://imgbb.com/">点击上传https://imgbb.com</a></p>
                        <form class="layui-form layui-form-pane" action="">

                            <div class="layui-form-item" pane="">
                                <label class="layui-form-label">类别</label>
                                <div class="layui-input-block">
                                    <input type="radio" name="wx_type" id="radio_wx" lay-verify="radio_v" value="0" title="微信群大全" >
                                    <div class="layui-unselect layui-form-radio layui-form-radioed">
                                    <i class="layui-anim layui-icon"></i><div>微信群大全</div></div>
                                    <input type="radio" name="wx_type" id="radio_gzh" lay-verify="radio_v" value="1" title="公众号互关">
                                    <div class="layui-unselect layui-form-radio"><i class="layui-anim layui-icon"></i><div>公众号互关</div></div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">图片地址</label>
                                <div class="layui-input-block">
                                    <input type="text" id="qcode_url" name="qcode_url" onpropertychange="OnPropChanged (event)" lay-verify="qcode_image" autocomplete="off" placeholder="图片地址请先上传到第三方获取二维码图片地址再粘贴到这个框里进行发布" class="layui-input">
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <label class="layui-form-label">标题</label>
                                <div class="layui-input-block">
                                    <input type="text" lay-verify="title" name="title" autocomplete="off" placeholder="请输入标题" class="layui-input">
                                </div>
                            </div>
                            <div class="layui-form-item layui-form-text">
                                <div class="layui-input-block">
                                    <textarea placeholder="简单的介绍一下" name="describe" lay-verify="text" class="layui-textarea"></textarea>
                                </div>
                            </div>

                            <div class="layui-form-item">
                                <button class="layui-btn" lay-submit="release" lay-filter="release">发布</button>
                            </div>
                        </form>
                    </div>
                    <div class="layui-tab-item">敬请期待吧~</div>
                </div>
            </div>

        </div>
    </div><!-- end sitecoent -->

    <!--底部内容-->
    <footer class="site-footer">
        <div class="container">
            <div class="footer-widget">
                <div class="row">
                    <div class="col-xs-12 col-sm-6 col-md-3 widget--about">
                        <div class="widget--content">
                            <div class="footer--logo mb-20">
                                <img class="tap-logo" src="static/picture/logo.png" data-dark="" alt="流木领域">
                            </div>

                        </div>
                    </div>
                    <!-- .col-md-2 end -->
                    <div class="col-xs-12 col-sm-3 col-md-2 col-md-offset-1 widget--links">
                        <div class="widget--title">
                            <h5>友情链接</h5>
                        </div>
                        <div class="widget--content">
                            <ul class="list-unstyled mb-0">
                                <li><a href="#">百度</a> </li>
                                <li><a href="#">搜狗</a></li>
                                <li><a href="#">腾讯</a></li>
                                <li><a href="#">淘宝</a></li>
                            </ul>
                        </div>
                    </div>
                    <!-- .col-md-2 end -->
                    <div class="col-xs-12 col-sm-3 col-md-2 widget--links">
                        <div class="widget--title">
                            <h5 style='text-align:center'>QQ群二维码</h5>
                        </div>
                        <div class="widget--content">
                            <img src="static/picture/wechat_qcode.jpg">
                        </div>
                    </div>
                    <!-- .col-md-2 end -->
                    <div class="col-xs-12 col-sm-3 col-md-2 widget--links">
                        <div class="widget--title">
                            <h5 style='text-align:center'>微信公众号</h5>
                        </div>
                        <div class="widget--content">
                            <img src="static/picture/wechat_qcode.jpg">
                        </div>
                    </div>

                    <!-- .col-md-2 end -->
                    <div class="col-xs-12 col-sm-3 col-md-2 widget--links">
                        <div class="widget--title">
                            <h5 style='text-align:center'>个人微信</h5>
                        </div>
                        <div class="widget--content">
                            <img src="static/picture/user_wechat_qcode.jpg">
                        </div>
                    </div>


                </div>
            </div>
            <div class="site-info">
                © 流木领域 www.16ds.net 湘ICP备18017148号-1
            </div>
        </div>
    </footer>
    <!--暂时不知道是干嘛的-->
    <div class="rollbar">
        <div class="rollbar-item" etap="to_top"><i class="fa fa-angle-up"></i></div>
    </div>
    <div class="dimmer"></div>
    <!--侧边栏-->
    <div class="off-canvas">
        <div class="canvas-close"><i class="mdi mdi-close"></i></div>
        <div class="logo-wrapper">
            <a href="index.html">
                <img class="logo regular" src="static/picture/logo.png" alt="流木领域">
            </a>
        </div>
        <div class="mobile-menu hidden-lg hidden-xl"></div>
        <aside class="widget-area">
        </aside>
    </div>
    <script type='text/javascript' src='static/js/sweetalert2.min-4.9.js'></script>
    <script type='text/javascript' src='static/js/plugins-4.9.js'></script>
    <script type='text/javascript' src='static/js/app-4.9.js'></script>
    <link rel="stylesheet" type="text/css" rel="external nofollow" target="_blank" href="static/css/sweetalert.min.css">
    <script src="static/js/sweetalert.min.js"></script>
    <script>document.body.oncopy = function () {
        swal("复制成功！", "转载请务必保留原文链接，申明来源，谢谢合作！！", "success");
    };</script>
    <script>
        !function (e, t, a) {
            function r() {
                for (var e = 0; e < s.length; e++) s[e].alpha <= 0 ? (t.body.removeChild(s[e].el), s.splice(e, 1)) : (s[e].y--, s[e].scale += .004, s[e].alpha -= .013, s[e].el.style.cssText = "left:" + s[e].x + "px;top:" + s[e].y + "px;opacity:" + s[e].alpha + ";transform:scale(" + s[e].scale + "," + s[e].scale + ") rotate(45deg);background:" + s[e].color + ";z-index:99999");
                requestAnimationFrame(r)
            }

            function n() {
                var t = "function" == typeof e.onclick && e.onclick;
                e.onclick = function (e) {
                    t && t(),
                        o(e)
                }
            }

            function o(e) {
                var a = t.createElement("div");
                a.className = "heart",
                    s.push({
                        el: a,
                        x: e.clientX - 5,
                        y: e.clientY - 5,
                        scale: 1,
                        alpha: 1,
                        color: c()
                    }),
                    t.body.appendChild(a)
            }

            function i(e) {
                var a = t.createElement("style");
                a.type = "text/css";
                try {
                    a.appendChild(t.createTextNode(e))
                } catch (t) {
                    a.styleSheet.cssText = e
                }
                t.getElementsByTagName("head")[0].appendChild(a)
            }

            function c() {
                return "rgb(" + ~~(255 * Math.random()) + "," + ~~(255 * Math.random()) + "," + ~~(255 * Math.random()) + ")"
            }

            var s = [];
            e.requestAnimationFrame = e.requestAnimationFrame || e.webkitRequestAnimationFrame || e.mozRequestAnimationFrame || e.oRequestAnimationFrame || e.msRequestAnimationFrame ||
                function (e) {
                    setTimeout(e, 1e3 / 60)
                },
                i(".heart{width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;}.heart:after{top: -5px;}.heart:before{left: -5px;}"),
                n(),
                r()
        }(window, document);
    </script>
    <script>
        /*添加分类*/

    </script>
</div>
</body>
<script src="https://www.layuicdn.com/layui/layui.js"></script>
<script>
    var termTile=document.getElementById("term-title");
    var jifen=document.getElementById("jifen-num");
    if (sessionStorage.getItem("token")==null){
        self.location="index.html";
    }
    jifen.innerText="积分："+sessionStorage.getItem("userIntegral");
    termTile.innerText="涉及到法律法规，存在损害国家利益、破坏民族团结、扰乱社会秩序，散步淫秽、色情、赌博、暴力、或侵犯他人合法权益的争议内容，将不予通过";
    $('input').on('input propertychange', function() {
        if (this.id=="qcode_url"){
            validateImage(this.value);
        }
    });
    layui.use(['form'], function() {
        var form = layui.form
        form.verify({
            radio_v:function(value){
              if (!document.getElementById("radio_wx").checked&&!document.getElementById("radio_gzh").checked){
                  return '请选择发布的类别';
              }
            },
            qcode_image:function (value) {
                if (value.length<1){
                    return '请输入图片地址';
                }
                if(!validateImage(value)){

                    return '请输入正确的图片地址';
                }

            },
            title: function(value){
                if(value.length < 1){
                    return '请输入标题';
                }
            }
            ,text: function(value){
                if (value.length<1){
                    return '请输入简单介绍';
                }
            }
        });
        //监听提交
        form.on('submit(release)', function(data){
            data.field["create_user_id"]=sessionStorage.getItem("token");
            data.field["create_name"]=sessionStorage.getItem("userName");
            $.ajax({
                url: host+"wechat/releaseWechatQcode",
                type: 'POST',
                dataType: 'json',
                contentType: 'application/json',
                data:JSON.stringify(data.field),
            }).done(function(response) {
                if (response.meta.success){
                    layer.msg(response.data,{time:1000}, function () {
                        self.location="index.html";
                    });
                }else{
                    layer.msg(response.meta.message,{time:1000}, function () {
                    });
                }
            });
            return false;
        });
    });
    //判断链接是否存在
       function validateImage(pathImg) {
        var ImgObj = new Image();
        ImgObj.src = pathImg;
        var result=false;
           if( ImgObj.fileSize > 0 || ( ImgObj.width > 0 &&  ImgObj.height > 0)) {
               result= true;
        } else {
               result= false;
        }
        return result;
    }
</script>
</html>
